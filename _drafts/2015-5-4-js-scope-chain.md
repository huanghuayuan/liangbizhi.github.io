---
layout: post
title: JavaScript的作用域链
categories: 前端
tags: javascript
comments: true
---
# 作用域

作用域就是变量与函数的可访问范围。

## 全局作用域

1. 最外层函数和在最外层函数外面定义的变量拥有全局作用域。

2. 所有末定义直接赋值的变量自动声明为拥有全局作用域。

3. 所有window对象的属性拥有全局作用域。

## 局部作用域

局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部。 

# 作用域链（Scope Chain）

JavaScript里一切都是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列**仅供JavaScript引擎访问**的内部属性。其中一个内部属性是[[Scope]]，由ECMA-262标准第三版定义，该内部属性包含了函数**被创建的作用域中**对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。

函数对象内部属性`[[scope]]`包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。

JavaScript中，每次调用一个函数的时候，就会进入一个函数内的作用域，当从函数返回以后，就返回调用前的作用域。

**JavaScript中函数运行在它们被定义的作用域里，而不是它们被执行的作用域里。**

JavaScript的实现作用域并非“堆栈”方式，而是使用列表。	

1. 一个函数被定义的时刻，会创建该函数对象的`[[scope]]`属性，并将该属性链接到定义它的作用域链上。
2. 一个函数被调用时，会创建一个活动对象。将函数每一个形参都命名为该对象的属性。然后将该活动对象作为此时的作用域的最前端。并将函数对象的`[[scope]]`属性加入到scope chain中。

# 参考

[http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html](http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html)